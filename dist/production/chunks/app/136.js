(self.webpackChunkneo_mjs_realworld_example_app=self.webpackChunkneo_mjs_realworld_example_app||[]).push([[136],{5136:(t,e,l)=>{"use strict";l.r(e),l.d(e,{default:()=>r});var s=l(5557),a=l(1939),o=l(7692),i=l(6518);class r extends s.Z{static getConfig(){return{className:"RealWorld.view.article.CreateComponent",body_:"",cls:["editor-page"],errors_:[],description_:"",slug:null,tagList_:[],title_:"",_vdom:{cn:[{cls:["container","page"],cn:[{cls:["row"],cn:[{cls:["col-md-10","offset-md-1","col-xs-12"],cn:[{tag:"ul",cls:["error-messages"],flag:"errors"},{tag:"form",cn:[{tag:"fieldset",cn:[{tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control","form-control-lg"],flag:"title",name:"title",placeholder:"Article Title",type:"text"}]},{tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control"],name:"description",flag:"description",placeholder:"What's this article about?",type:"text"}]},{tag:"fieldset",cls:["form-group"],cn:[{tag:"textarea",cls:["form-control"],flag:"body",name:"body",placeholder:"Write your article (in markdown)",rows:8}]},{tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control","field-tags"],flag:"tags",name:"tags",placeholder:"Enter tags",type:"text"},{cls:["tag-list"],flag:"tag-list"}]},{tag:"button",cls:["btn","btn-lg","btn-primary","pull-xs-right"],html:"Publish Article",type:"button"}]}]}]}]}]}]}}}constructor(t){super(t);let e=this,l=e.domListeners;l.push({click:{fn:e.onSubmitButtonClick,delegate:".btn-primary",scope:e}},{click:{fn:e.onTagClose,delegate:".ion-close-round",scope:e}},{keydown:{fn:e.onFieldTagsKeyDown,delegate:".field-tags",scope:e}}),e.domListeners=l}afterSetBody(t,e){let l=this.vdom;a.Z.getByFlag(l,"body").value=t,this.vdom=l}afterSetDescription(t,e){let l=this.vdom;a.Z.getByFlag(l,"description").value=t,this.vdom=l}afterSetErrors(t,e){let l=this.vdom,s=a.Z.getByFlag(l,"errors");s.cn=[],Object.entries(t||{}).forEach((([t,e])=>{s.cn.push({tag:"li",html:t+" "+e.join(" and ")})})),this.vdom=l}afterSetTagList(t,e){let l=this.vdom,s=a.Z.getByFlag(l,"tag-list"),o=a.Z.getByFlag(l,"tags");s.cn=[],o.value=null,Object.entries(t||{}).forEach((([t,e])=>{s.cn.push({tag:"span",cls:["tag-default tag-pill"],cn:[{tag:"i",cls:["ion-close-round"],"data-value":e},{vtype:"text",html:e}]})})),this.vdom=l}afterSetTitle(t,e){let l=this.vdom;a.Z.getByFlag(l,"title").value=t,this.vdom=l}onFieldTagsKeyDown(t){const e=this;"Enter"===t.key&&Neo.main.DomAccess.getAttributes({id:t.target.id,attributes:"value"}).then((t=>{o.Z.findChildVnode(e.vnode,{className:"field-tags"}).vnode.attributes.value=t.value,e.tagList=[...e._tagList,t.value]}))}onSubmitButtonClick(){let t=this,e=t.vdom,l=a.Z.getByFlag(e,"body"),s=a.Z.getByFlag(e,"description"),o=[a.Z.getByFlag(e,"title").id,s.id,l.id];Neo.main.DomAccess.getAttributes({id:o,attributes:"value"}).then((e=>{i.Z[t.slug?"put":"post"]({data:JSON.stringify({article:{title:e[0].value,description:e[1].value,body:e[2].value,tagList:t.tagList}}),slug:t.slug}).then((e=>{const l=e.json.errors;l?t.errors=l:Neo.Main.setRoute({value:"/article/"+e.json.article.slug})}))}))}onTagClose(t){this.tagList=this.tagList.filter((e=>e!==t.target.data.value))}resetForm(){this.set({body:"",description:"",slug:null,tagList:[],title:""})}}Neo.applyClassConfig(r)}}]);