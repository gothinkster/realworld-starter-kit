(self.webpackChunkneo_mjs_realworld_example_app=self.webpackChunkneo_mjs_realworld_example_app||[]).push([[634],{634:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});var n=o(643);class i extends n.Z{static getConfig(){return{className:"Neo.main.addon.WindowPosition",intervalId:null,intervalTime:20,remote:{app:["registerWindow","setDock","unregisterWindow"]},screenLeft:null,screenTop:null,singleton:!0,windows:{}}}constructor(e){super(e);let t=this,o=window;t.screenLeft=o.screenLeft,t.screenTop=o.screenTop,o.addEventListener("mouseout",t.onMouseOut.bind(t)),o.addEventListener("resize",t.onResize.bind(t))}adjustPositions(){let e;Object.entries(this.windows).forEach((([t,o])=>{e=this.getPosition(o),Neo.Main.windowMoveTo({windowName:t,x:e.left,y:e.top})}))}checkMovement(){let e,t=this,o=Neo.worker.Manager,n=window,i=n.screenLeft,s=n.screenTop;t.screenLeft===i&&t.screenTop===s||(e=Neo.Main.getWindowData(),t.adjustPositions(),o.sendMessage("app",{action:"windowPositionChange",data:{appName:o.appName,...e}}),t.screenLeft=i,t.screenTop=s)}dockDirectionChange(e,t){return!(("bottom"!==e&&"top"!==e||"left"!==t&&"right"!==t)&&("bottom"!==t&&"top"!==t||"left"!==e&&"right"!==e))}getPosition(e){let t,o,n=window;switch(e.dock){case"bottom":t=n.screenLeft,o=n.outerHeight+n.screenTop-50;break;case"left":t=n.screenLeft-e.size,o=n.screenTop+28;break;case"right":t=n.outerWidth+n.screenLeft,o=n.screenTop+28;break;case"top":t=n.screenLeft,o=n.screenTop-e.size+78}return{left:t,top:o}}onMouseOut(e){let t=this;e.toElement?t.intervalId&&(clearInterval(t.intervalId),t.intervalId=null):t.intervalId||(t.intervalId=setInterval(t.checkMovement.bind(t),t.intervalTime))}onResize(e){let t,o,n=window;Object.entries(this.windows).forEach((([e,i])=>{switch(i.dock){case"bottom":case"top":o=n.outerWidth;break;case"left":case"right":t=n.outerHeight-28}Neo.Main.windowResizeTo({height:t,width:o,windowName:e})})),this.adjustPositions()}registerWindow(e){this.windows[e.name]=e}setDock(e){let t,o,n=this,i=e.dock,s=e.name,r=n.windows[s];r&&(t=n.dockDirectionChange(i,r.dock),r.dock=i,o=n.getPosition(r),t&&Neo.Main.windowResizeTo({height:"bottom"===i||"top"===i?r.size:window.outerHeight-28,width:"left"===i||"right"===i?r.size:window.outerWidth,windowName:s}),Neo.Main.windowMoveTo({windowName:s,x:o.left,y:o.top}))}unregisterWindow(e){delete this.windows[e.name]}}Neo.applyClassConfig(i);let s=Neo.create(i);Neo.applyToGlobalNs(s);const r=s}}]);