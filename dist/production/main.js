!function(e){var t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(s,o,function(t){return e[t]}.bind(null,o));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=63)}({1:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(13);const o=Symbol("afterSetQueue"),r=Symbol("isInstance");class a{static getStaticConfig(){return{registerToGlobalNs:!0}}static getConfig(){return{className:"Neo.core.Base",alternateClassName:"Neo.Base",ntype:"base",mixins:null}}constructor(e){e=e||{};let t=this;Object.defineProperties(t,{[o]:{configurable:!0,enumerable:!1,value:[],writable:!0},[r]:{enumerable:!1,value:!0}}),t.createId(e.id||t.id),delete e.id,t.constructor.config&&delete t.constructor.config.id,(t.getStaticConfig("observable")||t.mixins&&Neo.ns("Neo.core.Observable",t.mixins))&&t.initObservable(e),t.initConfig(e),t.controller&&t.controller.parseConfig(),Object.defineProperty(t,"configsApplied",{enumerable:!1,value:!0}),t.processAfterSetQueue(),t.remote&&setTimeout(t.initRemote.bind(t),1)}onConstructed(){}init(){}addToAfterSetQueue(e,t,n){let s=this;!s.configsApplied&&s[o]&&s[o].push({fn:e,key:t,oldValue:n})}beforeSetEnumValue(e,t,n,s=n+"s"){const o=this.getStaticConfig(s);return o.includes(e)?e:(Neo.logError("Supported values for "+n+" are:",o.join(", "),this),t)}createId(e){let t=this;e||(e=s.a.getId(t.ntype)),t.id=e,!0===a.instanceManagerAvailable?Neo.manager.Instance.register(t):(Neo.idMap||(Neo.idMap={}),Neo.idMap[t.id]=t)}destroy(){let e=this;!0===a.instanceManagerAvailable&&Neo.manager.Instance.unregister(e),Object.entries(e).forEach(t=>{e[t]=null,delete e[t]})}getStaticConfig(e){let t=this.constructor.staticConfig;return e?t[e]:t}initConfig(e,t){Object.assign(this,this.mergeConfig(e,t))}initRemote(){let e,t=this.remote,n=this.className;if(!this.singleton)throw new Error("Remote method access only functional for Singleton classes "+n);!Neo.config.unitTestMode&&Neo.isObject(t)&&Object.entries(t).forEach(([t,s])=>{Neo.workerId!==t&&(e="main"===Neo.workerId?Neo.worker.Manager:Neo.currentWorker).sendMessage(t,{action:"registerRemote",methods:s,className:n})})}mergeConfig(e,t){let n=this,s=n.constructor;if(!s.config)throw new Error("Neo.applyClassConfig has not been run on "+n.className);return t||(n.originalConfig=Neo.clone(e,!0,!0)),{...s.config,...e}}processAfterSetQueue(){let e=this;e[o]&&e.configsApplied&&(e[o].forEach(t=>{e[t.fn](e[t.key],t.oldValue)}),delete e[o])}setStaticConfig(e,t){let n=this.constructor.staticConfig;return!!n.hasOwnProperty(e)&&(n[e]=t,!0)}get[Symbol.toStringTag](){return this.className+" (id:"+this.id+")"}static[Symbol.hasInstance](e){return!!e&&(!0===e[r]&&super[Symbol.hasInstance](e))}}Neo.applyClassConfig(a),a.instanceManagerAvailable=!1},10:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));let s=self.Neo||{};s=self.Neo=Object.assign({ntypeMap:{},insideWorker:"undefined"!=typeof DedicatedWorkerGlobalScope||"undefined"!=typeof WorkerGlobalScope,applyClassConfig:function(e){let t,n=null,o=null,c={},d=e.prototype||e,u=[],p={};for(;d.__proto__;){if((t=d.constructor).hasOwnProperty("classConfigApplied")){n=s.clone(t.config,!0),o=s.clone(t.staticConfig,!0),delete n.alternateClassName;break}u.unshift(d),d=d.__proto__}c=n||c,p=o||p,u.forEach(n=>{let o,d=(t=n.constructor).getConfig&&t.getConfig()||{},u=t.getStaticConfig&&t.getStaticConfig()||{};d&&Object.entries(d).forEach(([e,t])=>{"_"===e.slice(-1)?(delete d[e],e=e.slice(0,-1),d[e]=t,function(e,t){if(l(e,t))throw"Config "+t+"_ ("+e.className+") already has a set method, use beforeGet, beforeSet & afterSet instead";Object.defineProperty(e,t,{get:function(){let e=this,n="beforeGet"+s.capitalize(t),o=e["_"+t];return Array.isArray(o)?"items"!==t&&(o=[...o]):o instanceof Date&&(o=new Date(o.valueOf())),e[n]&&"function"==typeof e[n]&&(o=e[n](o)),o},set:function(e){let n=this,o="_"+t,r=s.capitalize(t),a="beforeSet"+r,i="afterSet"+r,l=n[o];n[a]&&"function"==typeof n[a]&&(e=n[a](e,l)),n[o]=e,(s.isObject(e)||Array.isArray(e)||e!==l)&&n[i]&&"function"==typeof n[i]&&(n.configsApplied?n[i](e,l):n.addToAfterSetQueue(i,o,l))}})}(n,e)):l(n,e)||Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!0})}),Object.assign(t,u),d.hasOwnProperty("ntype")&&(s.ntypeMap[d.ntype]=d.className),o=c.hasOwnProperty("mixins")&&c.mixins||[],u&&u.observable&&o.push("Neo.core.Observable"),d.hasOwnProperty("mixins")&&Array.isArray(d.mixins)&&d.mixins.length>0&&o.push(...d.mixins),o.length&&function(e,t){Array.isArray(t)||(t=[t]);let n,o,l,c=0,d=t.length,u={};for(;c<d;c++){if((n=t[c]).isClass)l=n.prototype,o=s.ns(l.className);else{if(!r(n))throw new Error("Attempting to mixin an undefined class: "+n+", "+e.prototype.className);o=s.ns(n),l=o.prototype}l.className.split(".").reduce(a(o),u),Object.getOwnPropertyNames(l).forEach(i(e.prototype,l))}e.prototype.mixins=u}(t,o),delete d.alternateClassName,delete d.mixins,delete c.mixins,Object.assign(c,d),Object.assign(p,u),Object.assign(t,{classConfigApplied:!0,config:s.clone(c,!0),isClass:!0,staticConfig:s.clone(p,!0)}),delete t.getConfig,delete t.getStaticConfig,c.singleton||this.applyToGlobalNs(e)})},applyToGlobalNs:function(e,t){let n,o,r,a,i,l="function"==typeof e?e.prototype:e;!0===l.constructor.registerToGlobalNs&&(a=(r=(o=t||(l.isClass?l.config.className:l.className)).split(".")).pop(),(i=s.ns(r,!0))[a]=e),t||(n=l.isClass?l.config.alternateClassName:l.hasOwnProperty("alternateClassName")&&l.alternateClassName)&&(Array.isArray(n)||(n=n.split(",")),n.forEach(t=>{this.applyToGlobalNs(e,t)}))},applyFromNs:function(e,t,n,s){let o;return e&&n&&"object"==typeof n&&Object.entries(n).forEach(([n,r])=>{o=t[r],e[n]=s?o.bind(t):o}),e},assignDefaults:function(e,t){return e&&t&&"object"==typeof t&&Object.entries(t).forEach(([t,n])=>{e.hasOwnProperty(t)||(e[t]=n)}),e},clone:function(e,t,n){let o;return Array.isArray(e)?e.map(e=>s.clone(e,t,n)):null!==e&&"object"==typeof e?e.constructor.isClass&&e instanceof s.core.Base?n?e:this.cloneNeoInstance(e):e.constructor.isClass?e:(o={},Object.entries(e).forEach(([e,r])=>{t&&(r=s.clone(r,t,n)),o[e]=r}),o):e},cloneNeoInstance:function(e){let t={...e.originalConfig};return delete t._id,delete t.id,s.create(e.className,t)},create:function(e,t){let n,o;if("function"==typeof e&&void 0!==e.constructor)n=e;else{if("object"==typeof e){if(!(t=e).className&&!t.module)return console.error("Class created with object configuration missing className or module property",t),null;t.className?(e=t.className,delete t.className):(e=t.module.prototype.className,delete t.module)}if(!r(e))throw new Error("Class "+e+" does not exist");n=s.ns(e)}return(o=new n(t)).onConstructed(),o.init(),o},emptyFn:function(){},ns:function(e,t,n){return(e=Array.isArray(e)?e:e.split(".")).reduce((e,n)=>{if(t&&!e[n]&&(e[n]={}),e)return e[n]},n||self)},ntype:function(e,t){if("object"==typeof e){if(!(t=e).ntype)throw new Error("Class defined with object configuration missing ntype property. "+t.ntype);e=t.ntype}let n=s.ntypeMap[e];if(!n)throw new Error("ntype "+e+" does not exist");return s.create(n,t)},onStart:s.emptyFn},s);const o=["_name","classConfigApplied","className","constructor","isClass","mixin","ntype","observable","registerToGlobalNs"];function r(e){try{return!!e.split(".").reduce((e,t)=>e[t],self)}catch(e){return!1}}function a(e){return(t,n,s,o)=>t[n]=s!==o.length-1?t[n]||{}:e}function i(e,t){return function(n){if(!~o.indexOf(n)){if(e[n]&&e[n]._from){if(t.className===e[n]._from)return void console.warn("Mixin set multiple times or already defined on a Base Class",e.className,t.className,n);throw new Error(e.className+": Multiple mixins defining same property ("+t.className+", "+e[n]._from+") => "+n)}e[n]=t[n],Object.getOwnPropertyDescriptor(e,n)._from=t.className,"function"==typeof e[n]&&(e[n]._name=n)}}}function l(e,t){let n;for(;e.__proto__;){if("object"==typeof(n=Object.getOwnPropertyDescriptor(e,t))&&"function"==typeof n.set)return!0;e=e.__proto__}return!1}s.config=s.config||{},s.assignDefaults(s.config,{applyBodyCls:!0,appPath:null,basePath:"./",cssPath:null,environment:"production",isExperimental:!1,isInsideSiesta:!1,locale:"default",resourcesPath:s.config.basePath+"resources/",themes:["neo-theme-light","neo-theme-dark"],unitTestMode:!1,useCss4:!0,useFontAwesome:!0,workerBasePath:s.config.basePath+"src/worker/"})},13:function(e,t,n){"use strict";class s{static getStaticConfig(){return{registerToGlobalNs:!0}}static getConfig(){return{className:"Neo.core.IdGenerator",ntype:"id-generator",base:"neo-",singleton:!0}}constructor(e){this.idCounter={},Neo.getId=this.getId.bind(this)}onConstructed(){}init(){}getId(e){e=e||"neo";let t=this.idCounter,n=t[e]||0;return t[e]=++n,this.base+("neo"===e?"":e+"-")+n}}Neo.applyClassConfig(s);let o=Neo.create(s);Neo.applyToGlobalNs(o),t.a=o},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n(13);class o{constructor(e){e.destination=e.destination||"main",e.id=e.id||s.a.getId(Neo.workerId),e.origin=e.origin||Neo.workerId,Object.assign(this,e)}}Neo.ns("Neo.worker",!0).Message=o},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n(1);class o extends s.a{static getConfig(){return{className:"Neo.worker.mixins.RemoteMethodAccess",ntype:"mixin-remote-method-access",mixin:!0}}generateRemote(e,t){let n=this,s=e.origin;return function(o,r){let a={action:"remoteMethod",data:o,destination:s,remoteClassName:e.className,remoteMethod:t};return n.promiseMessage(s,a,r)}}onRegisterRemote(e){if(e.destination===Neo.workerId){let t=this,n=e.className,s=e.methods,o=Neo.ns(n,!0);s.forEach((function(s){if(o[s])throw new Error("Duplicate remote method definition "+n+"."+s);o[s]=t.generateRemote(e,s)})),"main"!==Neo.workerId&&t.fire("remoteregistered",e)}}onRemoteMethod(e){let t,n,s=this,o=Neo.ns(e.remoteClassName);if(!o)throw new Error('Invalid remote namespace "'+e.remoteClassName+'"');if(!(n=o[e.remoteMethod]))throw new Error('Invalid remote method name "'+e.remoteMethod+'"');(t=Array.isArray(e.data)?n.call(o,...e.data):n.call(o,e.data))instanceof Promise?t.then((function(t){s.resolve(e,t)})).catch((function(t){s.reject(e,t)})):s.resolve(e,t)}reject(e,t){this.sendMessage(e.origin,{action:"reply",data:t,reject:!0,replyId:e.id})}resolve(e,t){this.sendMessage(e.origin,{action:"reply",data:t,replyId:e.id})}}Neo.applyClassConfig(o)},3:function(e,t,n){"use strict";var s=n(1);class o extends s.a{static getStaticConfig(){return{decamelRegEx:/([a-z])([A-Z])/g}}static getConfig(){return{className:"Neo.core.Util",ntype:"core-util"}}static createStyles(e){let t="";return Object.entries(e).forEach(([e,n])=>{null!=n&&(t+=o.decamel(e)+":"+n+";")}),t}static capitalize(e){return o.isString(e)&&e[0].toUpperCase()+e.slice(1)}static decamel(e){return e.replace(o.decamelRegEx,"$1-$2").toLowerCase()}static createStyleObject(e){if(!e)return null;let t;return e.split(/;(?=[^\)]*(?:\(|$))/g).reduce((e,n)=>(""!==(t=n.split(/:(.+)/).map((function(e){let t=parseFloat(e);return e==t?t:e.trim()})))[0]&&(t[0]=t[0].replace(/-([a-z])/g,(e,t)=>t.toUpperCase()),e[t[0]]=t[1]),e),{})}static isArray(e){return Array.isArray(e)}static isBoolean(e){return"boolean"==typeof e}static isDefined(e){return void 0!==e}static isEmpty(e){return Array.isArray(e)?0===e.length:o.isObject(e)?0===Object.keys(e).length:!!o.isString(e)&&""===e}static isNumber(e){return"number"==typeof e&&isFinite(e)}static isObject(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}static isString(e){return"string"==typeof e}static toArray(e,t,n){let s;return e&&(s=e.length)?"string"==typeof e?e.split(""):Array.prototype.slice.call(e,t||0,n||s):[]}}Neo.applyClassConfig(o),Neo.applyFromNs(Neo,o,{createStyleObject:"createStyleObject",createStyles:"createStyles",capitalize:"capitalize",decamel:"decamel",isArray:"isArray",isBoolean:"isBoolean",isDefined:"isDefined",isEmpty:"isEmpty",isNumber:"isNumber",isObject:"isObject",isString:"isString",toArray:"toArray"},!0),t.a=o},32:function(e,t,n){"use strict";var s=n(1);n.d(t,"a",(function(){return s.a}));n(6),n(7),n(3)},6:function(e,t,n){"use strict";var s=n(1);class o extends s.a{static getConfig(){return{className:"Neo.core.Logger",ntype:"logger",enableLogs:!0,level:"log",singleton:!0}}constructor(e){super(e),Neo.applyFromNs(Neo,this,{error:"error",info:"info",log:"log",logError:"logError",warn:"warn"},!0)}error(e){throw new Error(e)}log(...e){this.level="log",this.write(...e)}info(...e){this.level="info",this.write(...e)}logError(...e){this.level="error",this.write(...e)}warn(...e){this.level="warn",this.write(...e)}write(...e){!0===this.enableLogs&&console[this.level](...e)}}Neo.applyClassConfig(o);let r=Neo.create(o);Neo.applyToGlobalNs(r),t.a=r},63:function(e,t,n){"use strict";n.r(t);var s=n(10),o=n(32),r=n(1);class a extends r.a{static getConfig(){return{className:"Neo.main.mixins.DeltaUpdates"}}du_focusNode(e){this.getElement(e.id).focus()}du_insertNode(e){let t,n=e.index,s=this.getElement(e.parentId),o=s.childNodes.length,r=0,a=n,i=!1;for(;r<o;r++)8===s.childNodes[r].nodeType&&(r<a&&a++,i=!0);i?(t=this.htmlStringToElement(e.outerHTML),o>0&&o>a?s.insertBefore(t,s.childNodes[a]):s.appendChild(t)):(o=s.children.length)>0&&o>n?s.children[n].insertAdjacentHTML("beforebegin",e.outerHTML):o>0?s.children[o-1].insertAdjacentHTML("afterend",e.outerHTML):s.insertAdjacentHTML("beforeend",e.outerHTML)}du_moveNode(e){let t=e.index,n=this.getElement(e.id),s=this.getElement(e.parentId);t>=s.children.length?s.appendChild(n):n&&s.children[t].id!==e.id&&s.insertBefore(n,s.children[t])}du_removeNode(e){let t=this.getElement(e.id);t&&t.parentNode.removeChild(t)}du_replaceChild(e){this.getElement(e.parentId).replaceChild(this.getElement(e.toId),this.getElement(e.fromId))}du_updateNode(e){let t=this.getElementOrBody(e.id);t?Object.entries(e).forEach(([e,n])=>{switch(e){case"attributes":Object.entries(n).forEach(([e,n])=>{this.voidAttributes.includes(e)?t[e]="true"===n:null===n||""===n?"value"===e?t[e]="":t.removeAttribute(e):t[e]=n});break;case"cls":t.classList.add(...n.add||[]),t.classList.remove(...n.remove||[]);break;case"innerHTML":t.innerHTML=n||"";break;case"outerHTML":t.outerHTML=data.outerHTML;break;case"style":Neo.isObject(n)&&t&&Object.keys(n).forEach((function(e){t.style[e]=n[e]}))}}):console.warn("du_updateNode: node not found for id",e.id)}du_updateVtext(e){let t=this.getElement(e.parentId),n=t.innerHTML,s=`\x3c!-- ${e.id} --\x3e`,o=new RegExp(s+"[\\s\\S]*?\x3c!-- /neo-vtext --\x3e");t.innerHTML=n.replace(o,e.value)}htmlStringToElement(e){const t=document.createElement("template");return t.innerHTML=e,t.content.firstChild}update(e){let t,n,s=this,o=e.deltas,r=0;for(n=(o=Array.isArray(o)?o:[o]).length,s.logDeltaUpdates&&(s.countDeltas+=e.deltas&&e.deltas.length||0,s.countUpdates++,console.log("update "+s.countUpdates,"total deltas ",s.countDeltas,Neo.clone(e,!0)));r<n;r++)switch((t=o[r]).action){case"focusNode":s.du_focusNode(t);break;case"insertNode":s.du_insertNode(t);break;case"moveNode":s.du_moveNode(t);break;case"removeNode":s.du_removeNode(t);break;case"replaceChild":s.du_replaceChild(t);break;case"updateVtext":s.du_updateVtext(t);break;default:s.du_updateNode(t)}Neo.worker.Manager.sendMessage(e.origin||"app",{action:"reply",replyId:e.id,success:!0})}}Neo.applyClassConfig(a);class i extends r.a{static getConfig(){return{className:"Neo.main.mixins.Markdown"}}markdownToHtml(e){return(new showdown.Converter).makeHtml(e)}}Neo.applyClassConfig(i);class l extends r.a{static getConfig(){return{className:"Neo.main.mixins.Hljs"}}onSyntaxHighlight(e){if(hljs){let t=document.getElementById(e.vnodeId);hljs.highlightBlock(t),hljs.lineNumbersBlock(t),Neo.worker.Manager.sendMessage(e.origin||"app",{action:"reply",replyId:e.id,success:!0})}else console.error("highlight.js is not included inside the main thread.")}onSyntaxHighlightInit(e){if(hljs){let t=document.querySelectorAll("pre code:not(.hljs)");Array.prototype.forEach.call(t,hljs.highlightBlock),Neo.worker.Manager.sendMessage(e.origin||"app",{action:"reply",replyId:e.id,success:!0})}else console.error("highlight.js is not included inside the main thread.")}onSyntaxHighlightLine(e){let t,n=document.getElementById(e.vnodeId),s="neo-highlighted-line";e.addLine&&(t=n.querySelector('[data-line-number="'+e.addLine+'"]'))&&(t.parentNode.classList.add(s),t.parentNode.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})),e.removeLine&&(t=n.querySelector('[data-line-number="'+e.removeLine+'"]'))&&t.parentNode.classList.remove(s)}}Neo.applyClassConfig(l);var c=n(7);class d extends r.a{static getConfig(){return{className:"Neo.main.mixins.Siesta"}}adjustSiestaEnvironment(){let e,t=0,n=document.styleSheets.length;for(document.body.classList.add("neo-body","neo-body-viewport","neo-theme-dark");t<n;t++)(e=document.styleSheets[t]).href&&e.href.includes("highlightjs")&&(e.ownerNode.id="hljs-theme")}}Neo.applyClassConfig(d);class u extends r.a{static getConfig(){return{className:"Neo.main.mixins.Stylesheet"}}createStyleSheet(e,t,n){if(!e&&!n)throw new Error("createStyleSheet: you need to either pass a name or a href");const s=document.createElement("link"),o=n||(Neo.config.cssPath?Neo.config.cssPath+e:Neo.config.basePath+"dist/"+Neo.config.environment+"/"+e);Object.assign(s,{href:o,rel:"stylesheet",type:"text/css"}),t&&(s.id=t),document.head.appendChild(s)}hasStyleSheet(e){let t,n=0,s=document.styleSheets.length;for(;n<s;n++)if((t=document.styleSheets[n]).href&&t.href.includes(e))return!0;return!1}insertCssRules(e){let t,n=document.getElementById("neoDynamicStyleSheet"),s=0,o=e.rules.length;for(n||((n=document.createElement("style")).id="neoDynamicStyleSheet",document.head.appendChild(n)),t=n.sheet;s<o;s++)t.insertRule(e.rules[s],t.cssRules.length);Neo.worker.Manager.sendMessage(e.origin,{action:"reply",data:e,replyId:e.id,success:!0})}insertTheme(){let e=this,t=Neo.config.themes;Array.isArray(t)||(t=[t]),document.body.classList.add(t[0]),Neo.config.useCss4?(e.removeStyleSheets({included:["neo-theme-","-no-css4.css"]}),t.length>0&&!e.hasStyleSheet("neo-structure.css")&&e.createStyleSheet("neo-structure.css"),t.forEach(t=>{e.hasStyleSheet(t+".css")||e.createStyleSheet(t+".css")})):(e.removeStyleSheets({included:["neo-structure.css"]}),e.removeStyleSheets({included:["neo-theme-"],excluded:["-no-css4.css"]}),t.length>0&&!e.hasStyleSheet(t[0]+"-no-css4.css")&&e.createStyleSheet(t[0]+"-no-css4.css","neo-theme"))}removeStyleSheets(e){let t,n,s=0,o=document.styleSheets.length,r=e.included||[],a=e.included||[];for(;s<o;s++)t=document.styleSheets[s],n=!0,t.href&&(a.forEach(e=>{t.href.includes(e)&&(n=!1)}),n&&(r.forEach(e=>{t.href.includes(e)||(n=!1)}),n&&(console.log("removeSheet",t.href),t.ownerNode.parentNode.removeChild(t.ownerNode))))}swapStyleSheet(e){document.getElementById(e.id).setAttribute("href",e.href)}}Neo.applyClassConfig(u);class p extends r.a{static getConfig(){return{className:"Neo.main.DomAccess",logDeltaUpdates:!0,singleton:!0,mixins:[a,l,i,c.a,d,u],remote:{app:["applyBodyCls","execCommand","focus","getAttributes","getBoundingClientRect","markdownToHtml","scrollIntoView","selectNode","swapStyleSheet","windowScrollTo"]},voidAttributes:["checked","required"]}}constructor(e){super(e);let t=this;t.logDeltaUpdates&&(t.countDeltas=0,t.countUpdates=0)}applyBodyCls(e){const t=e.cls||[];document.body.classList.add(...t)}execCommand(e){return document.execCommand(e.command),e}focus(e){let t=this.getElement(e.id);return t&&t.focus(),{id:e.id}}getAttributes(e){let t;if(Array.isArray(e.id))t=[],e.id.forEach(n=>{t.push(this.getAttributes({attributes:e.attributes,id:n}))});else{let n=this.getElementOrBody(e.id);t={},n&&(Array.isArray(e.attributes)||(e.attributes=[e.attributes],e.attributes.forEach(e=>{t[e]=n[e]})))}return t}getBoundingClientRect(e){let t;if(Array.isArray(e.id))t=[],e.id.forEach(e=>{t.push(this.getBoundingClientRect({id:e}))});else{let n=this.getElementOrBody(e.id),s={};t={},n&&(s=n.getBoundingClientRect(),Object.assign(t,{bottom:s.bottom,height:s.height,left:s.left,right:s.right,top:s.top,width:s.width,x:s.x,y:s.y}))}return t}getElement(e){return document.getElementById(e)}getElementOrBody(e){return e&&"body"!==e&&"document.body"!==e?this.getElement(e):document.body}onReadDom(e){let t,n,s=e.attributes||[],o=e.functions||[],r=e.styles||[],a=e.vnodeId,i={},l={},c={},d=a?this.getElement(a):null;s.forEach(e=>{i[e]=d[e]}),o.forEach((e,s)=>{Neo.isObject(e)?(e.params=e.params||[],e.paramIsDomNode=e.paramIsDomNode||[],n=e.scope?document[e.scope]:d,e.params.forEach((t,n)=>{e.paramIsDomNode[n]&&!0===e.paramIsDomNode[n]&&(e.params[n]=this.getElement(e.params[n]))}),t=e.returnFnName?e.returnFnName:s,l[t]=n[e.fn](...e.params),e.returnValue&&(l[t]=l[t][e.returnValue])):l[e]=d[e]()}),r.forEach(e=>{c[e]=d.style[e]}),Object.assign(e,{attributes:i,functions:l,styles:c}),Neo.worker.Manager.sendMessage(e.origin,{action:"reply",data:e,replyId:e.id,success:!0})}onScrollIntoView(e){let t=this.getElement(e.vnodeId).querySelector('[data-list-header="'+e.text+'"]');t&&t.previousSibling.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}read(e){"function"==typeof e&&e()}scrollIntoView(e){let t=this.getElement(e.id);return t&&t.scrollIntoView({behavior:e.behavior||"smooth",block:e.block||"start",inline:e.inline||"nearest"}),{id:e.id}}selectNode(e){let t=this.getElement(e.id),n=Neo.isNumber(e.start)||0,s=Neo.isNumber(e.end)||99999;return t&&(t.select(),t.setSelectionRange(n,s)),{id:e.id}}windowScrollTo(e){window.scrollTo({behavior:e.behavior||"smooth",left:e.left||0,top:e.top||0})}write(e){let t=this.getElementOrBody(e.parentId),n=t.children.length,s=e.parentIndex,o=e.html||e.outerHTML;!e.parentIndex||n<1?t.insertAdjacentHTML("beforeend",o):n>s?t.children[s].insertAdjacentHTML("beforebegin",o):t.children[n-1].insertAdjacentHTML("afterend",o)}}Neo.applyClassConfig(p);let h=Neo.create(p);Neo.applyToGlobalNs(h);var g=h;const m=[{name:"change",handler:"onChange"},{name:"click",handler:"onClick"},{name:"contextmenu",handler:"onContextMenu"},{name:"focusin",handler:"onFocusIn"},{name:"focusout",handler:"onFocusOut"},{name:"input",handler:"onChange"},{name:"keydown",handler:"onKeyDown"},{name:"keyup",handler:"onKeyUp"},{name:"mouseenter",handler:"onMouseEnter",options:{capture:!0}},{name:"mouseleave",handler:"onMouseLeave",options:{capture:!0}},{name:"wheel",handler:"onWheel",options:{passive:!1}}],f=["neo-circle-component","neo-dateselector","neo-gallery","neo-helix"],y={"neo-dateselector":300},b={date:null,target:null},N=[],C=[];class v extends r.a{static getStaticConfig(){return{observable:!0}}static getConfig(){return{className:"Neo.main.DomEvents",singleton:!0,remote:{app:["addDomListener","registerPreventDefaultTargets"]}}}constructor(e){super(e);document.addEventListener("DOMContentLoaded",this.onDomContentLoaded.bind(this)),window.addEventListener("hashchange",this.onHashChange.bind(this))}addDomListener(e){let t,n,s,o=this,r=0,a=e.events.length;for(;r<a;r++)o[(t=e.events[r]).handler]||(o[t.handler]=Neo.emptyFn),(s="document.body"===(n=t.vnodeId||e.vnodeId)?document.body:document.getElementById(n)).addEventListener(t.name,o[t.handler].bind(o));Neo.worker.Manager.sendMessage(e.origin,{action:"reply",data:e,replyId:e.id,success:!0})}addGlobalDomListeners(){let e=this;m.forEach(t=>{document.body.addEventListener(t.name,e[t.handler].bind(e),t.options)})}domEventListener(e){let t=this,n=e.target,s={action:"domEvent",eventName:e.type,data:{id:n.id,path:(e.path||e.composedPath()).map(e=>e.id),value:n.value}};switch(e.type){case"dragend":t.dragElementId=null;break;case"dragenter":case"dragleave":if(t.dragElementId===n.id)return;break;case"dragover":t.onDragOver(e),e.preventDefault();break;case"dragstart":t.dragElementId=n.id;break;case"drop":if(!t.dragElementId||this.dragElementId===n.id)return;e.stopPropagation&&e.stopPropagation(),e.preventDefault(),s.data.srcId=t.dragElementId,t.dragElementId=null;break;default:e.preventDefault()}Neo.worker.Manager.sendMessage("app",s)}getEventData(e){return{path:(e.path||e.composedPath()).map(e=>this.getTargetData(e)),target:this.getTargetData(e.target),timeStamp:e.timeStamp,type:e.type}}getKeyboardEventData(e){const{altKey:t,code:n,ctrlKey:s,key:o,keyCode:r,metaKey:a,shiftKey:i}=e;return{...this.getEventData(e),altKey:t,code:n,ctrlKey:s,key:o,keyCode:r,metaKey:a,shiftKey:i}}getMouseEventData(e){const{altKey:t,clientX:n,clientY:s,ctrlKey:o,metaKey:r,offsetX:a,offsetY:i,pageX:l,pageY:c,screenX:d,screenY:u,shiftKey:p}=e;return{...this.getEventData(e),altKey:t,clientX:n,clientY:s,ctrlKey:o,metaKey:r,offsetX:a,offsetY:i,pageX:l,pageY:c,screenX:d,screenY:u,shiftKey:p}}getTargetData(e){return{checked:e.checked,childElementCount:e.childElementCount,clientHeight:e.clientHeight,clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,cls:e.classList?[...e.classList]:[],data:{...e.dataset},draggable:e.draggable,hidden:e.hidden,id:e.id,inert:e.inert,isConnected:e.isConnected,isContentEditable:e.isContentEditable,nodeType:e.nodeType,offsetHeight:e.offsetHeight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,offsetWidth:e.offsetWidth,scrollHeight:e.scrollHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollWidth:e.scrollWidth,style:e.style&&e.style.cssText,tabIndex:e.tabIndex,tagName:e.tagName&&e.tagName.toLowerCase()}}onChange(e){this.sendMessageToApp({...this.getEventData(e),valid:e.target.checkValidity(),value:e.target.value})}onClick(e){this.sendMessageToApp(this.getMouseEventData(e)),this.testPathInclusion(e,N)&&e.preventDefault()}onContextMenu(e){this.sendMessageToApp(this.getMouseEventData(e)),this.testPathInclusion(e,C)&&e.preventDefault()}onDomContentLoaded(){this.addGlobalDomListeners(),this.fire("domContentLoaded")}onDragOver(e){e.dataTransfer.dropEffect="move"}onFocusIn(e){this.sendMessageToApp(this.getEventData(e))}onFocusOut(e){this.sendMessageToApp(this.getEventData(e))}onHashChange(){const e=location.hash.substr(1);Neo.worker.Manager.sendMessage("app",{action:"hashChange",hash:this.parseHash(e),hashString:e})}onKeyDown(e){this.sendMessageToApp(this.getKeyboardEventData(e))}onKeyUp(e){this.sendMessageToApp(this.getKeyboardEventData(e))}onMouseEnter(e){this.sendMessageToApp({...this.getMouseEventData(e),fromElementId:e.fromElement&&e.fromElement.id||null})}onMouseLeave(e){this.sendMessageToApp({...this.getMouseEventData(e),toElementId:e.toElement&&e.toElement.id||null})}onWheel(e){let t=this.testPathInclusion(e,f),n=!1;if(t){if(y[t]){let e=new Date;b.date&&b.target===t&&e-b.date<y[t]?n=!0:Object.assign(b,{date:e,target:t})}if(!n){const{deltaX:t,deltaY:n,deltaZ:s}=e;this.sendMessageToApp({...this.getEventData(e),deltaX:t,deltaY:n,deltaZ:s})}e.preventDefault()}}parseHash(e){let t,n,s,o,r=e.split("&"),a={};for(t=0;t<r.length;t++)(s=r[t].split("=")).length<2&&s.push(""),n=decodeURIComponent(s[0]),o=decodeURIComponent(s[1]),-1!==n.indexOf("[]")?(void 0===a[n=n.substring(0,n.indexOf("[]"))]&&(a[n]=[]),a[n].push(this.parseValue(o))):a[n]=this.parseValue(o);return a}parseValue(e){return e==parseInt(e)?e=parseInt(e):"false"===e?e=!1:"true"===e&&(e=!0),e}registerPreventDefaultTargets(e){let t;switch(Array.isArray(e.cls)||(e.cls=[e.cls]),e.name){case"click":t=N;break;case"contextmenu":t=C}e.cls.forEach(e=>{t.includes(e)||t.push(e)})}sendMessageToApp(e){Neo.worker.Manager.sendMessage("app",{action:"domEvent",eventName:e.type,data:e})}testPathInclusion(e,t){let n,s,o=t.length,r=e.path||e.composedPath(),a=0,i=r.length;for(;a<i;a++)for(s=r[a],n=0;n<o;n++)if(s.classList&&s.classList.contains(t[n]))return t[n];return!1}}Neo.applyClassConfig(v);let w=Neo.create(v);Neo.applyToGlobalNs(w);var E=w;class S extends r.a{static getConfig(){return{className:"Neo.main.mixins.LocalStorage"}}createLocalStorageItem(e){this.updateLocalStorageItem(e)}destroyLocalStorageItem(e){window.localStorage.removeItem(e.key)}readLocalStorageItem(e){return{key:e.key,value:window.localStorage.getItem(e.key)}}updateLocalStorageItem(e){window.localStorage.setItem(e.key,e.value)}}Neo.applyClassConfig(S);var I=n(22),k=n(23);class M extends r.a{static getConfig(){return{className:"Neo.worker.Manager",ntype:"worker-manager",singleton:!0,basePath:Neo.config.workerBasePath||"worker/",mixins:[c.a,k.a],sharedWorkersEnabled:!1,webWorkersEnabled:!1,workers:{app:{fileName:Neo.config.isExperimental?"App.mjs":Neo.config.appPath},data:{fileName:Neo.config.isExperimental?"Data.mjs":"dataworker.js"},vdom:{fileName:Neo.config.isExperimental?"VDom.mjs":"vdomworker.js"}}}}constructor(e){super(e);const t=this;t.detectFeatures(),Neo.insideWorker||t.createWorkers(),Neo.workerId="main",t.promises={},t.on({"message:addDomListener":{fn:E.addDomListener,scope:E},"message:addGlobalDomListeners":{fn:E.addGlobalDomListeners,scope:E},"message:insertCssRules":{fn:g.insertCssRules,scope:g},"message:readDom":{fn:g.onReadDom,scope:g},"message:registerRemote":{fn:t.onRegisterRemote,scope:t},"message:scrollIntoView":{fn:g.onScrollIntoView,scope:g},"message:syntaxHighlight":{fn:g.onSyntaxHighlight,scope:g},"message:syntaxHighlightInit":{fn:g.onSyntaxHighlightInit,scope:g},"message:syntaxHighlightLine":{fn:g.onSyntaxHighlightLine,scope:g}})}detectFeatures(){const e=this;if(!window.Worker)throw new Error("Your browser does not support Web Workers");e.webWorkersEnabled=!0,window.SharedWorker&&(e.sharedWorkersEnabled=!0)}getWorker(e){return e instanceof Worker?e:this.workers[e].worker}createWorkers(){let e=this,t=location.hash;t&&(Neo.config.hash=E.parseHash(t.substr(1)),Neo.config.hashString=t.substr(1)),Object.entries(e.workers).forEach(([t,n])=>{n.worker=e.createWorker(n),e.sendMessage(t,{action:"registerNeoConfig",data:Neo.config})})}createWorker(e){const t=this,n=(e.basePath||t.basePath)+e.fileName,s=Neo.config.isExperimental?new Worker(n,{type:"module"}):new Worker(n);return s.addEventListener("message",t.onWorkerMessage.bind(t)),s.addEventListener("error",t.onWorkerError.bind(t)),s}onWorkerError(e){Neo.config.isExperimental||console.log("Worker Error:",e)}onWorkerMessage(e){let t,n=this,s=e.data,o=!1;const{action:r,destination:a,replyId:i}=s;n.fire("message:"+r,s),(t="reply"===r&&n.promises[i])&&("main"===s.destination&&(s=s.data),s.reject?t.reject(s):(s.data&&(s.data.autoMount&&(n.fire("automount",s),o=!0),s.data.updateVdom&&(n.fire("updateVdom",s),o=!0)),o?n.promises[i].data=s:t.resolve(s)),o||delete n.promises[i]),"main"!==a&&"reply"!==r?n.promiseMessage(a,s).then(e=>{n.sendMessage(e.destination,e)}).catch(e=>{n.sendMessage(s.origin,{action:"reply",reject:!0,replyId:s.id,error:e.message})}):"main"===a&&"remoteMethod"===r&&n.onRemoteMethod(s)}loadApplication(e){this.sendMessage("app",{action:"loadApplication",path:e,resourcesPath:Neo.config.resourcesPath})}broadcast(e){Object.entries(this.workers).forEach(t=>{this.sendMessage(t,e)})}resolveDomOperationPromise(e){if(e){let t=this.promises[e];t&&(t.resolve(t.data),delete this.promises[e])}}sendMessage(e,t,n){const s=this.getWorker(e);if(!s)throw new Error("Called sendMessage for a worker that does not exist"+e);t.destination=e;const o=new I.a(t);return s.postMessage(o,n),o}promiseMessage(e,t,n){const s=this;return new Promise((o,r)=>{let a=s.sendMessage(e,t,n).id;s.promises[a]={reject:r,resolve:o}})}}Neo.applyClassConfig(M);let x=Neo.create(M);Neo.applyToGlobalNs(x);var A=x;class L extends o.a{static getStaticConfig(){return{observable:!0}}static getConfig(){return{className:"Neo.Main",singleton:!0,isReady:!1,logAnimationFrames:!0,mixins:[S],mode:"read",readQueue:[],remote:{app:["createLocalStorageItem","destroyLocalStorageItem","readLocalStorageItem","setRoute","updateLocalStorageItem"]},running:!1,showFps:!1,timeLimit:15,totalFrameCount:0,updateQueue:[],writeQueue:[]}}constructor(e){super(e);let t=this;E.on("domContentLoaded",t.onDomContentLoaded,t),A.on({automount:t.onRender,"message:mountDom":t.onMountDom,"message:updateDom":t.onUpdateDom,updateVdom:t.onUpdateVdom,scope:t})}onDomContentLoaded(){this.isReady=!0,s.a.config.applyBodyCls&&g.applyBodyCls({cls:["neo-body"]}),s.a.config.useFontAwesome&&g.createStyleSheet(null,null,s.a.config.basePath+"node_modules/@fortawesome/fontawesome-free/css/all.min.css"),g.insertTheme(),s.a.config.isInsideSiesta&&g.adjustSiestaEnvironment(),s.a.config.appPath&&A.loadApplication(s.a.config.appPath)}globalResizeListener(e){console.log("globalResizeListener",e)}onMountDom(e){this.queueWrite(e),A.sendMessage(e.origin||"app",{action:"reply",replyId:e.id,success:!0})}onRender(e){e.data.replyId=e.replyId,this.queueWrite(e.data)}onUpdateDom(e){this.queueUpdate(e)}onUpdateVdom(e){e.data.replyId=e.replyId,this.queueUpdate(e.data)}processQueue(e,t){let n,s=this,o=s.timeLimit;for(;n=e.shift();){if(new Date-t>o)return e.unshift(n),requestAnimationFrame(s.renderFrame.bind(s));g[s.mode](n),A.resolveDomOperationPromise(n.replyId)}}queueRead(e){let t=this;t.readQueue.push(e),t.running||(t.running=!0,requestAnimationFrame(t.renderFrame.bind(t)))}queueUpdate(e){let t=this;t.updateQueue.push(e),t.running||(t.running=!0,requestAnimationFrame(t.renderFrame.bind(t)))}queueWrite(e){let t=this;t.writeQueue.push(e),t.running||(t.running=!0,requestAnimationFrame(t.renderFrame.bind(t)))}renderFrame(){let e=this,t=e.readQueue,n=e.updateQueue,s=e.writeQueue,o="read"===e.mode,r=new Date;e.logAnimationFrames&&(e.totalFrameCount++,console.log("Total Frames: "+e.totalFrameCount)),(!o&&s.length||(e.mode="read",!e.processQueue(t,r)))&&(n.length&&(e.mode="update",e.processQueue(n,r))||s.length&&(e.mode="write",e.processQueue(s,r))||(e.running=!1))}setRoute(e){window.location.hash=e.value}}s.a.applyClassConfig(L);let j=s.a.create(L);s.a.applyToGlobalNs(j);t.default=j},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n(1);class o extends s.a{static getConfig(){return{className:"Neo.core.Observable",ntype:"mixin-observable",mixin:!0}}initObservable(e){let t,n=this,s=n.__proto__;for(e.listeners&&(n.listeners=e.listeners,delete e.listeners),t=n.listeners,n.listeners={},t&&n.addListener(t);s&&s.constructor.isClass;)s.constructor.staticConfig.observable&&!s.constructor.listeners&&Object.assign(s.constructor,{addListener:n.addListener,fire:n.fire,listeners:{},on:n.on,removeListener:n.removeListener,un:n.un}),s=s.__proto__}addListener(e,t,n,s,o,r){let a,i,l,c=this;if("object"==typeof e)e.hasOwnProperty("scope")&&(n=e.scope,delete e.scope),Object.entries(e).forEach(([e,t])=>{c.addListener(e,t,n)});else if("object"==typeof t)n=n||t.scope,a=t.fn,r=r||t.order,s=s||t.eventId;else if("function"==typeof t)a=t;else{if("string"!=typeof t)throw new Error("Invalid addListener call: "+e);a=t}return l={fn:a,scope:n,data:o,id:s||Neo.getId("event")},(i=c.listeners&&c.listeners[e])?(i.forEach(t=>{if(t.id===s||t.fn===a&&t.scope===n)throw new Error("Duplicate event handler attached: "+e)}),"number"==typeof r?i.splice(r,0,l):"before"===r?i.unshift(l):i.push(l)):c.listeners[e]=[l],l.id}fire(e){let t,n,s,o,r=this,a=[].slice.call(arguments,1),i=r.listeners;if(i&&i[e])for(o=(n=[...i[e]]).length,s=0;s<o;s++)(t=n[s]).fn.apply(t.scope||r,t.data?a.concat(t.data):a)}removeListener(e,t){if(Neo.isString(t)){let n=this.listeners[e],s=!1;n.forEach((e,n)=>{if(e.id===t)return s=n}),!1!==s&&n.splice(s,1)}}on(...e){return this.addListener(...e)}un(...e){this.removeListener(...e)}}Neo.applyClassConfig(o)}});