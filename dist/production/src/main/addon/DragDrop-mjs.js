(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{10:function(e,t,n){"use strict";n.r(t);var l=n(0),o=n(3),a=n(1);class r extends l.a{static getConfig(){return{className:"Neo.main.addon.DragDrop",alwaysFireDragMove:!1,boundaryContainerRect:null,clientX:0,clientY:0,dragProxyCls:"neo-dragproxy",dragProxyElement:null,dragProxyRect:null,dragZoneId:null,dropZoneIdentifier:null,initialScrollLeft:0,initialScrollTop:0,offsetX:0,offsetY:0,remote:{app:["setConfigs","setDragProxyElement"]},scrollContainerElement:null,scrollContainerRect:null,scrollFactorLeft:1,scrollFactorTop:1,singleton:!0}}constructor(e){super(e);let t=[];a.a.on({mouseEnter:this.onMouseEnter,mouseLeave:this.onMouseLeave,scope:this}),this.addGlobalEventListeners(),Neo.config.hasTouchEvents?t.push(n.e(11).then(n.bind(null,17))):t.push(n.e(10).then(n.bind(null,18))),Promise.all(t).then(e=>{Neo.create({module:e[0].default})})}addGlobalEventListeners(){let e=this;document.addEventListener("drag:end",e.onDragEnd.bind(e),!0),document.addEventListener("drag:move",e.onDragMove.bind(e),!0),document.addEventListener("drag:start",e.onDragStart.bind(e),!0)}getEventData(e){const t=e.path||e.composedPath(),n={...a.a.getEventData(e.detail.originalEvent),clientX:e.detail.clientX,clientY:e.detail.clientY};return e.detail.eventPath?n.targetPath=e.detail.eventPath.map(e=>a.a.getTargetData(e)):n.targetPath=n.path||n.composedPath(),n.path=t.map(e=>a.a.getTargetData(e)),n}onDragEnd(e){let t=this,n=t.getEventData(e),l=t.pathIncludesDropZone(n.targetPath);o.a.setBodyCls({remove:["neo-unselectable"]}),a.a.sendMessageToApp({...n,isDrop:l,type:"drag:end"}),l&&a.a.sendMessageToApp({...a.a.getMouseEventData(e.detail.originalEvent),dragZoneId:t.dragZoneId,type:"drop"}),Object.assign(t,{alwaysFireDragMove:!1,boundaryContainerRect:null,dragProxyCls:"neo-dragproxy",dragProxyElement:null,dragProxyRect:null,dragZoneId:null,dropZoneIdentifier:null,initialScrollLeft:0,initialScrollTop:0,scrollContainerElement:null,scrollContainerRect:null,setScrollFactorLeft:1,scrollFactorTop:1})}onDragMove(e){let t,n,l,o=this,r=o.dragProxyRect,i=o.boundaryContainerRect;o.scrollContainerElement&&(t=o.scrollContainer({clientX:e.detail.clientX,clientY:e.detail.clientY}),e.detail.clientX=t.clientX,e.detail.clientY=t.clientY),o.dragProxyElement&&(n=e.detail.clientX-o.offsetX,l=e.detail.clientY-o.offsetY,i&&(n<i.left?n=i.left:n>i.right-r.width&&(n=i.right-r.width),l<i.top?l=i.top:l>i.bottom-r.height&&(l=i.bottom-r.height)),o.dragProxyElement.style.left=n+"px",o.dragProxyElement.style.top=l+"px"),o.dragProxyElement&&!o.alwaysFireDragMove||a.a.sendMessageToApp({...o.getEventData(e),type:"drag:move"})}onDragStart(e){let t=this.dragProxyRect=e.target.getBoundingClientRect();o.a.setBodyCls({add:["neo-unselectable"]}),this.offsetX=e.detail.clientX-t.left,this.offsetY=e.detail.clientY-t.top,a.a.sendMessageToApp({...this.getEventData(e),type:"drag:start"})}onMouseEnter(e){let t=this;t.pathIncludesDropZone(e.path)&&a.a.sendMessageToApp({...e,dragZoneId:t.dragZoneId,type:"drop:enter"})}onMouseLeave(e){let t=this;t.pathIncludesDropZone(e.path)&&a.a.sendMessageToApp({...e,dragZoneId:t.dragZoneId,type:"drop:leave"})}pathIncludesDropZone(e){let t,n,l=!0,o=this.dropZoneIdentifier;if(o){t=o.cls,n=o.ids;for(const o of e){if(t){l=!1;for(const e of o.cls)if(t.includes(e)){l=!0;break}}if(l&&n&&!n.includes(o.id)&&(l=!1),l)return!0}}return!1}scrollContainer(e){let t=this,n=e.clientX-t.clientX,l=e.clientY-t.clientY,o=t.scrollContainerElement,a=t.scrollContainerRect;return t.clientX=e.clientX,t.clientY=e.clientY,(n<0&&e.clientX<a.left+250||n>0&&e.clientX>a.right-250)&&(o.scrollLeft+=n*t.scrollFactorLeft),(l<0&&e.clientY<a.top+250||l>0&&e.clientY>a.bottom-250)&&(o.scrollTop+=l*t.scrollFactorTop),{clientX:t.clientX+o.scrollLeft-t.initialScrollLeft,clientY:t.clientY+o.scrollTop-t.initialScrollTop}}setConfigs(e){let t,n=this;e.boundaryContainerId&&(t=o.a.getElementOrBody(e.boundaryContainerId),n.boundaryContainerRect=t.getBoundingClientRect()),delete e.boundaryContainerId,e.scrollContainerId&&(t=o.a.getElementOrBody(e.scrollContainerId),Object.assign(n,{scrollContainerElement:t,scrollContainerRect:t.getBoundingClientRect(),initialScrollLeft:t.scrollLeft,initialScrollTop:t.scrollTop})),delete e.scrollContainerId,Object.entries(e).forEach(([e,t])=>{n.hasOwnProperty(e)?n[e]=t:console.error("unknown key passed inside setConfigs()",e)})}setDragProxyElement(e){this.dragProxyElement=document.getElementById(e.id)}}Neo.applyClassConfig(r);let i=Neo.create(r);Neo.applyToGlobalNs(i),t.default=i}}]);